<html>
  <head>
      <link href="style.css" rel="stylesheet" type="text/css" />
      <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
      <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
      <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script>
      <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script>
      <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js" type="text/javascript"></script>
      <script>
        SyntaxHighlighter.all();
      </script> 
  </head>
  <body>
<h1>Table of Contents</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">Overview</a></li>
<li><a href="#toc_2">Concurrency</a></li>
<ul>
<li><a href="#toc_2.1">Number of transitions</a></li>
<li><a href="#toc_2.2">Order of transitions</a></li>
</ul>
<li><a href="#toc_3">Transition Consistency</a></li>
<ul>
<li><a href="#toc_3.1">Small-step consistency</a></li>
<li><a href="#toc_3.2">Interrupt Transitions and Preemption</a></li>
</ul>
<li><a href="#toc_4">Maximality</a></li>
<li><a href="#toc_5">Memory Protocols</a></li>
<li><a href="#toc_6">Event Lifelines</a></li>
<li><a href="#toc_7">External Event Communication</a></li>
<li><a href="#toc_8">Priority</a></li>
<li><a href="#toc_9">Step Algorithm</a></li>
</ul>
</div>

<h1 id="toc_1">Overview</h1>

<p>
The Statecharts semantics implemented by SCION is based on the paper <a href="http://www.cs.uwaterloo.ca/~nday/Papers/uw-scs-tr-2009-05.pdf">"Big-Step Semantics"</a>, by Shahram Esmaeilsabzali, Nancy A. Day, Joanne M. Atlee, and Jianwei Niu. This work attempts to categorize the semantic aspects of a number of Statecharts variants, and describe the space of possible semantic options for each of these aspects. SCION chooses a particular configuration of the available options for each of these semantic aspects. This document provides a summary description of each of these semantic aspects, as well as the semantic choice selected by SCION, and for comparison, where possible, the choice made by the "Algorithm for SCXML Interpretation" described in the SCXML draft specification. This document is not meant to stand on its own, but rather assumes the reader has read "Big-Step Semantics", which fully describes all semantic aspects and their associated options.
</p>

<p>
This document is fairly technical and abstract, and it is primarily intended as a reference. For a more readable and higher-level overview of the similarities and differences between SCION and SCXML semantics, see <a href="SCION vs. SCXML Comparison.html">SCION vs. SCXML Comparison</a>.
</p>

<h1 id="toc_2">Concurrency</h1>

<h2 id="toc_2.1">Number of transitions</h2>
<dl>
<dt>Description</dt>
<dd>Given a set of enabled transitions, this semantic aspect specifies how many transition occurrences can appear in a small-step.</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Only a single transition can be enabled in a small-step.
</li>
<li>
Multiple transitions can be enabled in a small-step
</li>
</ul>
<dl>
<dt>SCXML</dt>
<dd>Multiple</dd>
<dt>SCION </dt>
<dd>Same as SCXML</dd>
</dl>

<h2 id="toc_2.2">Order of transitions</h2>
<dl>
<dt>Description</dt>
<dd>In what order are selected transitions executed? </dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
No order is specified
</li>
<li>
Order is based on dependency order between variables ("dataflow" order)
</li>
<li>
Order is explicitly defined
</li>
</ul>
<dl>
<dt>SCXML</dt>
<dd>Explicitly defined, based on document order (which defines a total ordering on execution order of states and transitions).</dd>
<dt>SCION </dt>
<dd>Same as SCXML</dd>
</dl>

<h1 id="toc_3">Transition Consistency</h1>

<h2 id="toc_3.1">Small-step consistency</h2>
<dl>
<dt>Description</dt>
<dd>This defines what happens when you have a transition originating in a descendant of an orthogonal state, and targeting a descendant of the same orthogonal state, in a different orthogonal component.</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Arena Orthogonal : Two transition occurrences are included in the same small-step only if their arenas are orthogonal, where the arena of a transition is the smallest (lowest in the hierarchy of the composition tree) Or-state that is the (grand)parent of the source and destination control states of the transition.
</li>
<li>
Source/Destination orthogonal: A small-step is consistent if for any of its two distinct transition occurrences, their sources and destinations are pairwise orthogonal.
</li>
</ul>
<dl>
<dt>SCXML</dt>
<dd>Undefined in SCXML semantics.</dd>
<dt>SCION</dt>
<dd>Arena Orthogonal</dd>
</dl>

<h2 id="toc_3.2">Interrupt Transitions and Preemption</h2>

<dl>
<dt>Description</dt>
<dd>This describes the following conditions (see Figure 9 in "Big-Step Semantics"): </dd>
</dl>
<ul>
<li>
either the destination of one of the transitions is orthogonal with the source of the other, and the destination of the other transition is not orthogonal with the sources of either transition; we call the latter transition to be an interrupt for the former transition; or
</li>
<li>
the destination of neither transition is orthogonal with the sources of the two transitions, but their destinations are ancestrally related; we call the transition that has a destination that is (grand)child of the other an interrupt for the other.
</li>
</ul>

<dl>
<dt>Choices</dt>
</dl>
<ul>
<li>
Preemptive, meaning that a transition does not permit a small-step to include two such transitions
</li>
<li>
Non-preemptive otherwise
</li>
</ul>
<dl>
<dt>SCXML</dt>
<dd>Non-preemptive, in a very specific way: it will select transitions based on document order, until it reaches a transition that preempts later transitions, in which case it will not select them.</dd>
<dt>SCION</dt>
<dd>Non-preemptive</dd>
</dl>

<h1 id="toc_4">Maximality</h1>
<dl>
<dt>Description</dt>
<dd>Specifies when the sequence of small-steps of a big-step ends (i.e., when the model becomes stable, and is ready to sense the environment for new inputs).</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Syntactic: a special syntax is used that specifies the states where the system should stop
</li>
<li>
Implicit, of which there are two varieties
</li>
<ul>
<li>
Take-One: The system should incrementally take one transition in each big-step, until it reaches a point where it has no longer selected any transitions.
</li>
<li>
Take-Many: The system should take multiple transitions in each big-step, until it reaches a point where it no longer has any transitions selected.
</li>
</ul>
</ul>

<dl>
<dt>SCXML</dt>
<dd>Take-Many </dd>
<dt>SCION</dt>
<dd>Same as SCXML</dd>
</dl>

<h1 id="toc_5">Memory Protocols</h1>
<dl>
<dt>Description</dt>
<dd>How to obtain the value of a variable when it is accessed in a variable condition or in the right-hand-side of an assignment.</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Big-step, where variables stay the same throughout the big step, and are updated at the end of the big-step
</li>
<li>
Small-step, where variables can be updated in each small-step.
</li>
</ul>
<dl>
<dt>SCXML</dt>
<dd>Changes detected immediately, after evaluation of &lt;assign&gt; or after JavaScript assignment statement finishes executing.</dd>
<dt>SCION </dt>
<dd>Small-step</dd>
</dl>

<h1 id="toc_6">Event Lifelines</h1>
<dl>
<dt>Description</dt>
<dd>When can a generated event in a model be sensed by the event triggers of the transitions in its big-step?</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Whole: a generated event is considered present from the beginning of the current big-step, regardless of the small-step in which it has been generated, and persists until the end of the big-step
</li>
<li>
Remainder: a generated event is considered present in the intermediate snapshot after the small-step that generates it, and persists during the remainder of the big-step
</li>
<li>
Next small-step: a generated event is present only for the next small-step
</li>
<li>
Same: a generated event is present during the current small-step
</li>
</ul>

<dl>
<dt>SCXML</dt>
<dd>Event can be sensed in the next small-step. Exactly one event can be sensed at a time. If multiple internal events are sent in the same small-step, then those events are added to a queue of events, and they will be dequeued one at a time, such that each subsequent small-step will sense the event at the head of the queue.</dd>
<dt>SCION</dt>
<dd>Next small-step</dd>
</dl>

<h1 id="toc_7">External Event Communication</h1>

<dl>
<dt>Description</dt>
<dd>When can the system receive interface events (external events)?</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Strong Synchronous: An interface event is either present throughout a big-step from the beginning, or is absent throughout the big-step. 
</li>
<li>
Weak Synchronous: An interface event need not be present from the beginning of a big-step. If an interface event is generated by a sending component, the receiving components would receive the event during the current big-step.
</li>
<li>
Asynchronous: An interface event will be sensed in the big-step after the big-step in which it is generated.
</li>
</ul>

<dl>
<dt>SCXML</dt>
<dd>Asynchronous</dd>
<dt>SCION </dt>
<dd>Same</dd>
</dl>

<h1 id="toc_8">Priority</h1>

<dl>
<dt>Description</dt>
<dd>How to choose from a set of selected transitions?</dd>
<dt>Choices</dt>
</dl>
<ul>
<li>
Basis:
</li>
<ul>
<li>
Source: Priority is based on the transition source state. 
</li>
<li>
Destination: Priority is based on the transition destination state. 
</li>
<li>
Arena: Priority is based on transition arena.
</li>
</ul>
<li>
Scheme:
</li>
<ul>
<li>
Parent: If the basis is higher in the state hierarchy, it has higher priority.
</li>
<li>
Child: If the basis is lower in the state hierarchy, it has higher priority.
</li>
</ul>
</ul>

<dl>
<dt>SCXML</dt>
<dd>Uses a specific algorithm: sorts states in document order, then selects transitions by hierarchy of source state (inner-first priority). If multiple selected transitions on the source state, then document order is used.</dd>
<dt>SCION</dt>
<dd>First, uses Source-Child priority; if there are still conflicts, then uses document order where lower document order has higher priority.</dd>
</dl>

<h1 id="toc_9">Step Algorithm</h1>

<p>
Like the "Algorithm for SCXML Interpretation" described in the SCXML specification, these semantic choices are realized in a general step algorithm. Where possible, the pseudocode is annotated to indicate where specific semantic choices have been made. 
</p>

<p>
<a href="Pseudocode for SCION step algorithm.html">Pseudocode for SCION step algorithm</a>
</p>

<p>
SCION provides implementations of this step algorithm in CoffeeScript and Python.
</p>

</body>
</html>
